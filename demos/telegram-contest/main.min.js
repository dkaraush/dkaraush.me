function fixFloat(f){return round(f*1000)/1000};	function range(e,t,n){return max(min(e,n),t)}function d(e,t=1){for(;.1*e>(t*=10););return t}function formatValue(e){return(e=round(10*e)/10)>=1e6?round(e/1e4)/100+"M":e>=1e3?round(.01*e)/10+"K":e}Т="style",п="px",Object.getOwnPropertyNames(Math).forEach(function(e){window[e]=Math[e]}),window.addEventListener("resize",function e(){return S=window.devicePixelRatio,e}());const colors={background:[[255,255,255,1],[36,47,62,1]],sliderBackground:[[155,185,235,.1],[19,13,21,.1]],sliderButton:[[195,211,223,.5],[128,172,214,.5]],mainAxisColor:[[0,0,0,.1],[255,255,255,.1]],mainAxisTextColor:[[144,149,159,1],[68,85,101,1]]};var lastModeChanged=0;function color(e,t,n){var r=range(Date.now()-lastModeChanged,0,250)/250;night||(r=1-r);r=.5*(Math.sin((r - .5)*Math.PI) + 1);var a=Array.from(e[0],function(t,n){return e[0][n]+(e[1][n]-e[0][n])*r});return t&&(a[3]=t),n?Array.from(a,function(e,t){return t<3?e/255:e}):"rgba("+a.join(",")+")"}var chartOptions=[],lastRenderedTime=Date.now();function update(){requestAnimationFrame(update);var e=Date.now()-lastRenderedTime;for(var t of(lastRenderedTime=Date.now(),chartOptions))renderMain(e,t.mainCtx,t.mainCtx instanceof WebGLRenderingContext?t.mainCtx:null,t),renderLegend(e,t.legendCtx,t),t.lastL=t.L,t.lastR=t.R,t.forceRender=!1}function renderMain(e,t,n,r){if(!r.forceRender&&r.lastMax==r.maxShouldBe&&r.lastL==r.L&&r.lastR==r.R&&r.lastSliderMax==r.sliderMaxShouldBe&&objEqual(r.selected,r.alpha))return;var a=20*S,o=10*S,i=charts[r.id],l=i.length-1,s=0;if(r.lastL==r.L&&r.lastR==r.R&&objEqual(r.selected,r.alpha))s=r.maxShouldBe;else for(var c=0;c<i.columns.length;++c)if(1==r.selected[A=i.columns[c]]){var d=i.y[A].maxFunc(floor(r.L*l),ceil(r.R*l));d>s&&(s=d)}r.maxShouldBe=s,r.lastMax||(r.lastMax=s),s=r.lastMax+(s-r.lastMax)*range(e/75,.01,1),min(r.maxShouldBe,s)/max(r.maxShouldBe,s)>.999&&(r.lastMax=s=r.maxShouldBe),r.lastMax=s;var u=r.L*l,h=r.R*l,f=(r.R-r.L)*l,v=floor(u),g=ceil(h);n?(n.viewport(0,0,r.W,r.H),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT)):(t.clearRect(0,0,r.W,r.H),t.lineWidth=2*S);var m=r.lH-a-o;const p=1/r.W*S,x=1/r.H*S;var L=i.length>1e4;for(c=0;c<i.columns.length;++c){var b=i.y[A=i.columns[c]],R=r.alpha[A];if(R!=r.selected[A]&&(R=range(R+.41*(r.selected[A]-R),0,1),R=R>0.99?1:(R<0.01?0:R)),r.alpha[A]=R,0!=R){var y,w=[],T=null,C=null;n||(t.beginPath(),t.strokeStyle=i.colors[A].rgba(r.alpha[A])),E(0,H(b,u));for(var M=v;M<g;++M)E(M-u,b[M]);E(f,H(b,h)),n?glF(n,L?n.LINE_STRIP:n.TRIANGLES,w,i.colors[A].floata(r.alpha[A])):t.stroke()}function E(e,a,i){if(n){var l=e/f,c=a/s*(m/r.H)+(1-r.lH/r.H)+o/r.H*2;if(L)w.push(l,c);else{if(null==T)return T=l,void(y=c);var d=atan2(y-c,T-l),u=d+PI/2,h=d-PI/2,v=cos(u)*p,g=sin(u)*x,S=cos(h)*p,b=sin(h)*x;null!=C&&w.push(T+S,y+b,T+cos(C-PI/2)*p,y+sin(C-PI/2)*x,T+cos(C+PI/2)*p,y+sin(C+PI/2)*x,T+cos(C+PI/2)*p,y+sin(C+PI/2)*x,T+v,y+g,T+S,y+b),C=d,w.push(l+v,c+g,T+v,y+g,l+S,c+b,T+S,y+b,T+v,y+g,l+S,c+b),T=l,y=c}}else t.lineTo(e/f*r.W,o+(1-a/s)*m)}function H(e,t){return e[floor(t)]+(e[ceil(t)]-e[floor(t)])*(t-floor(t))}}var D=0;for(var A in i.y)if(1==r.selected[A]){var k=i.y[A].max;(k>D||-1==D)&&(D=k)}for(var A in r.sliderMaxShouldBe=D,r.lastSliderMax||(r.lastSliderMax=D),D=r.lastSliderMax+(D-r.lastSliderMax)*range(e/75,.01,1),min(r.sliderMaxShouldBe,D)/max(r.sliderMaxShouldBe,D)>.99&&(r.lastSliderMax=D=r.sliderMaxShouldBe),r.lastSliderMax=D,t.lineWidth=1,i.y){b=i.y[A],w=[];n||(t.strokeStyle=i.colors[A].rgba(r.alpha[A]),t.beginPath());for(M=0;M<i.length;++M)n?w.push(M/l,range(b[M]/D*r.sH/r.H,0,r.sH/r.H)):t.lineTo(M/l*r.W,-b[M]/D*r.sH+r.H);n?glF(n,n.LINE_STRIP,w,i.colors[A].floata(r.alpha[A])):t.stroke()}}function renderLegend(e,t,n){if(!n.forceRender&&n.lastMax==n.maxShouldBe&&n.iX&&0==n.iX.length&&n.iY&&0==n.iY.length&&n.lastL==n.L&&n.lastR==n.R&&n.lastHover==n.hover&&objEqual(n.selected,n.alpha)&&Date.now()-lastModeChanged>250)return;var r=charts[n.id],a=r.length-1,o=n.L*a,i=n.R*a,l=(n.R-n.L)*a,s=(floor(o),ceil(i),n.lastMax),c=20*S,u=10*S;t.clearRect(0,0,n.W,n.lH),t.strokeStyle=color(colors.mainAxisColor),t.lineWidth=1,t.font=.5*c+"px Roboto",t.fillStyle=color(colors.mainAxisTextColor,1),n.hover>=0&&(t.beginPath(),t.moveTo((n.hover-o)/l*n.W,0),t.lineTo((n.hover-o)/l*n.W,n.lH-c),t.stroke());var h=n.maxShouldBe/4,f=round(h/d(h))*d(h),v=[];if(n.iY||(n.iY=[]),n.lastYDiff!=f&&f>0&&s>1&&n.lastYDiff>0){for(let e=n.lastYDiff;e<s;e+=n.lastYDiff)e%f!=0&&n.iY.push({i:e,v:-1,V:1});for(let e=f;e<s;e+=f)e%n.lastYDiff!=0&&n.iY.push({i:e,v:1,V:0})}n.lastYDiff=f;for(var g=0;s>1&&g<n.iY.length;++g){var m=n.iY[g];m.i%f!=0&&1==m.v?m.v=-1:m.i%f==0&&-1==m.v&&(m.v=1),m.V+=m.v*e*.005*2.5,m.V<0&&m.v<0||m.V>1&&m.v>0?(n.iY.splice(g,1),g--):(t.strokeStyle=color(colors.mainAxisColor,m.V),t.fillStyle=color(colors.mainAxisTextColor,m.V),x(n.iY[g].i))}if(s>1&&f>0){t.fillStyle=color(colors.mainAxisTextColor,1);for(var p=0;p<s;p+=f)x(p)}function x(e){v.indexOf(e)>=0||(v.push(e),t.beginPath(),t.moveTo(0,u+(1-p/s)*(n.lH-u-c)),t.lineTo(n.W,u+(1-p/s)*(n.lH-u-c)),t.lineWidth=1,t.strokeStyle=color(colors.mainAxisColor,.1)	,t.stroke(),t.strokeStyle=color(colors.background),t.lineWidth=S*2.5,t.strokeText(formatValue(e),0,u+(1-e/s)*(n.lH-u-c)-5*S),t.fillText(formatValue(e),0,u+(1-e/s)*(n.lH-u-c)-5*S))}if(n.hover>=0)for(var L in t.lineWidth=2*S,r.y)if(n.selected[L]){var b=r.y[L];t.beginPath(),t.arc((n.hover-o)/l*n.W,u+(1-b[n.hover]/s)*(n.lH-c-u),5*S,0,2*PI),t.fillStyle=color(colors.background),t.fill(),t.strokeStyle=r.colors[L].rgba(n.alpha[L]),t.stroke()}n.lastHover=n.hover,t.lineWidth=1;var R="JanFebMarAprMayJunJulAugSepOctNovDec";h=1/fixFloat(n.R-n.L);var y=2**round(log2(h)),w=round(r.length/(6*y)),T=floor(fixFloat(n.L)*(r.length-1));if(T-=T%w,n.iX||(n.iX=[]),"number"==typeof n.lastDateStart&&n.lastDateDiff&&n.lastDateDiff!=w){for(g=0;g<10;++g){var C=n.lastDateStart+n.lastDateDiff*g;(C-T)%w!=0&&C<r.length-1&&C>0&&n.iX.push({i:C,val:1,v:-1,dif:w})}for(g=0;g<10;++g){((E=T+w*g)-n.lastDateStart)%n.lastDateDiff!=0&&E<r.length-1&&E>0&&n.iX.push({i:E,val:0,v:1,dif:w})}}n.lastDateStart=T,n.lastDateDiff=w;for(v=[],g=0;g<n.iX.length;++g){var M=n.iX[g];M.i%w!=0&&M.v>0&&(M.v*=-1),M.i%w==0&&M.v<0&&(M.v*=-1),M.val+=M.v*(abs(w-M.dif)+1)*e*.001*2.5,M.val<0||M.val>1?(n.iX.splice(g,1),g--):(t.fillStyle=color(colors.mainAxisTextColor,M.val),H(M.i))}t.fillStyle=color(colors.mainAxisTextColor,1);for(g=0;g<10;++g){var E;0==(E=T+w*g)||E>=r.length-1||v.indexOf(E)>=0||H(E)}function H(e){if(!(v.indexOf(e)>=0)){v.push(e);var o=new Date(r.x[e]),i=R.substring(z=3*o.getUTCMonth(),z+3)+" "+o.getUTCDate(),l=(e/a-n.L)/(n.R-n.L)*n.W,s=l-t.measureText(i).width/2;l>n.lW||t.fillText(i,s,n.lH-c/2)}}}function glF(e,t,n,r){e.bindBuffer(e.ARRAY_BUFFER,e._vb),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STREAM_DRAW),e.vertexAttribPointer(e._va,2,e.FLOAT,!1,0,0),e.uniform4fv(e._cu,r),e.drawArrays(t,0,n.length/2)}update();var wrapper=document.querySelector("#wrapper");function initChart(e,t){var n,r,a,o,i,l=charts[t],s=$("div","chart","chart-"+t),c=$("div","main"),d=$("div","slider");d.append(a=$("div","bg1"),o=$("div","bg2"),i=$("div","btn")),c.append(n=$("canvas"),r=$("canvas"),d);var u=function(e){var t={};for(var n in e.y)t[n]=1;return t}(charts[t]),h={L:.5,R:1,selected:u,W:0,H:0,sW:0,sH:0,id:t,alpha:Object.assign({},u),mainCanvas:n,mainCtx:initGL(n.getContext("webgl")||n.getContext("experimental-webgl"))||n.getContext("2d"),legendCanvas:r,legendCtx:r.getContext("2d"),forceRender:!1,hover:-1};function f(){S;n.width=h.W=c.clientWidth*S,n.height=h.H=c.clientHeight*S,n[Т].width=h.W/S+п,n[Т].height=h.H/S+п,r.width=h.W=c.clientWidth*S,r.height=h.lH=(c.clientHeight-60)*S,r[Т].width=h.W/S+п,r[Т].height=h.lH/S+п,h.sH=48*S,h.forceRender=!0,b(h)}chartOptions[t]=h,window.addEventListener("resize",f),d.addEventListener("touchmove",x),d.addEventListener("mousedown",p),d.addEventListener("touchstart",p),d.addEventListener("touchend",L),window.addEventListener("mouseup",L);var v={},g=null,m=!1;function p(e){var t,n,r,a,o=d.getBoundingClientRect(),i=d.clientWidth;e.constructor&&"TouchEvent"==e.constructor.name?(n=e.changedTouches[0].clientX,t=max(e.changedTouches[0].radiusX,10*S),a=e.changedTouches[0].identifier,e.preventDefault()):(n=e.clientX,t=10*S,m=!0,a="mouse"),(r=range((n-=(o.x||o.left))/i,0,1))*i>=h.L*i-t&&r*i<=h.L*i+t?v[a]="from":r*i>=h.R*i-t&&r*i<=h.R*i+t?v[a]="to":r*i>=h.L*i&&r*i<=h.R*i?(v[a]="all",g=r-h.L):v[a]=null}function x(e){var t,n,r=d.getBoundingClientRect(),a=d.clientWidth;if(e.constructor&&"TouchEvent"==e.constructor.name)t=range(e.changedTouches[0].clientX-(r.x||r.left)-.75*e.changedTouches[0].radiusX,0,a),n=e.changedTouches[0].identifier,e.preventDefault();else{if(!m)return;t=e.clientX-(r.x||r.left),n="mouse"}var o=t/a;switch(v[n]){case"from":h.L=range(o,0,h.R-.1);break;case"to":h.R=range(o,h.L+.1,1);break;case"all":var i=h.R-h.L,l=range(o-g,0,1-i),s=l+i;h.L=l,h.R=s}w(),b(h)}function L(e){e.constructor&&"MouseEvent"==e.constructor.name?m=!1:v[e.changedTouches[0].identifier]=null}function b(e){var t=d.clientWidth;a[Т].right=(1-e.L)*t+п,o[Т].left=e.R*t+п,i[Т].left=e.L*t+п,i[Т].right=(1-e.R)*t+п}window.addEventListener("mousemove",function(e){m&&v.mouse&&x(e)});var R=null;function y(e){var t,n,r=charts[h.id],a=r.length-1,o=c.getBoundingClientRect();e.constructor&&"MouseEvent"==e.constructor.name?(t=e.clientX,n=e.clientY):e.constructor&&"TouchEvent"==e.constructor.name&&(t=e.changedTouches[0].clientX,n=0);var i,l,d=(t-(o.x||o.left))/o.width,u=h.L+d*(h.R-h.L),f=round(u*a);if(h.hover=f,null==R){for(var v of((R=$("div","hover")).append($("h1")),Object.keys(r.y))){var g=$("div","box "+v),m=$("div","value"),p=$("div","label",null,r.names[v]);p[Т].color=m[Т].color=r.colors[v].rgba(1),g.append(m,p),R.append(g)}s.append(R)}for(var v of Object.keys(r.y))R.querySelector("."+v+" .value").innerHTML=(r.y[v][f]+''),R.querySelector(".box."+v)[Т].display=h.selected[v]?"inline-block":"none";R.querySelector("h1").innerHTML=(i=r.x[f],(l=new Date(i).toDateString()).slice(0,l.lastIndexOf(" ")));var x=R.getBoundingClientRect();R[Т].left=range((h.hover/(r.length-1)-h.L)/(h.R-h.L)*s.clientWidth-x.width/4,15,s.clientWidth-x.width-15)+п,R[Т].top=range(n-o.y-x.height,0,s.clientHeight-x.height-15)+п}function w(){R&&(R.remove(),R=null),h.hover=-1,h.forceRender=!0}r.addEventListener("mousemove",y),r.addEventListener("touchmove",y),r.addEventListener("mouseleave",w);var T=$("div","checkboxes",null,Array.from(Object.keys(h.selected),function(e,n){return instance('<div class="checkbox {CHECKED}" id="{ID}"><div class="box" style="background: {COLOR}; border-color: {COLOR};"><div class="checkmark"><span></span><span></span></div><div class="bg"></div></div><div class="label">{LABEL}</div></div>',{checked:h.selected[e]?"checked":"",id:"c"+t+"-"+e,color:l.colors[e].rgba(1),label:l.names[e]})}).join(""));T.querySelectorAll(".checkbox").forEach(function(e){var t=e.id.substring(e.id.indexOf("-")+1,e.id.length);e.addEventListener("mousedown",n),e.addEventListener("mouseup",r),e.addEventListener("mouseleave",r),e.addEventListener("touchstart",n),e.addEventListener("touchend",r);function n(t){var n,r;t.constructor&&"TouchEvent"==t.constructor.name?(t.preventDefault(),n=t.changedTouches[0].clientX,r=t.changedTouches[0].clientY):(n=t.clientX,r=t.clientY);var a=$("div","ripple"),o=e.getBoundingClientRect(),i=r-(o.y||o.top),l=n-(o.x||o.left);a[Т].top=i+п,a[Т].left=l+п,a[Т].width=a[Т].height="0px",e.append(a);var s=2*sqrt(o.width**2+o.height**2);setTimeout(function(){a[Т].width=a[Т].height=s+п,a[Т].top=i-s/2+п,a[Т].left=l-s/2+п,a[Т].opacity="0.5"},16),a}function r(n){n.constructor&&"TouchEvent"==n.constructor.name&&n.preventDefault();var r=e.querySelectorAll(".ripple");null!=r&&r.forEach(function(e){e[Т].opacity="0",setTimeout(function(){e.remove()},200)}),n.type!=='mouseleave'&&(h.selected[t]=1-h.selected[t]),e.className="checkbox"+(h.selected[t]?" checked":""),w()}}),s.append($("h1","header",null,l.title),c,T),wrapper.append(s),f(),b(h),setTimeout(function(){b(h)},0)}window.start=function(){for(var e=0;e<charts.length;++e)initChart(headings[e],e)},window.addEventListener("scroll",function(){switcher.className=html.scrollTop+html.clientHeight>=html.scrollHeight-150?"no-shadow":""}),switcher.addEventListener("click",function(){night=!night,setNight()});var night=!1;function setNight(){lastModeChanged=Date.now(),localStorage.night=night,switcher.querySelector("span").innerHTML=night?"Day":"Night",html.className=night?"night":""}function instance(e,t){var n=e;for(var r in t)n=n.replace(new RegExp("\\{"+r.toUpperCase()+"\\}","g"),t[r]);return n}function objEqual(e,t){for(var n in e)if(t[n]!=e[n])return!1;return!0}function initGL(e){return e?(e.shaderSource(vertexShader=e.createShader(35633),"precision highp float;\nattribute vec2 V;\nvoid main() {\n\tgl_Position = vec4(V, 0.0, 1.0) * 2.0 - 1.0;\n}\n"),e.compileShader(vertexShader),e.shaderSource(fragmentShader=e.createShader(35632),"precision mediump float;\nuniform vec4 color;\nvoid main() {\n\tgl_FragColor = color;\n}\n"),e.compileShader(fragmentShader),e.attachShader(program=e.createProgram(),vertexShader),e.attachShader(program,fragmentShader),e.linkProgram(program),e.useProgram(program),e._cu=e.getUniformLocation(program,"color"),e._vb=e.createBuffer(),e.enableVertexAttribArray(e._va=e.getAttribLocation(program,"V")),e.enable(3042),e.blendEquation(32774),e.blendFuncSeparate(770,771,1,771),e):null}function $(e,t,n,r,a){var o=document.createElement(e);return"string"==typeof t&&(o.className=t),"string"==typeof n&&(o.id=n),"string"==typeof a&&(o.innerText=a),"string"==typeof r&&(o.innerHTML=r),o}["true","false"].indexOf(localStorage.night)>=0&&(night="true"==localStorage.night);let dataReq=new XMLHttpRequest;dataReq.open("GET","charts_data.json",!0),dataReq.send(),dataReq.onreadystatechange=function(){4==this.readyState&&200==this.status&&init(this.responseText)};let headings=["Channel #1","Channel #2","Channel #3","Channel #4","Followers"];function generateMaxTree(e){let t=e.length,n=2*2**(Math.floor(Math.log2(t))+1)-1,r=new Array(n).fill(null);return function t(n,a,o){if(n==a)return void(r[o]=e[n]);let i=Math.floor((n+a)/2);t(n,i,2*o+1);t(i+1,a,2*o+2);r[o]=Math.max(r[2*o+1],r[2*o+2])}(0,t-1,0),function(e,n){return function e(t,n,a,o,i){if(t<=a&&n>=o)return r[i];if(t>o||n<a)return-1/0;let l=Math.floor((a+o)/2),s=e(t,n,a,l,2*i+1),c=e(t,n,l+1,o,2*i+2);return Math.max(s,c)}(e,n,0,t-1,0)}}function init(e){"string"==typeof e&&e.length>0&&(e=JSON.parse(e)),window.charts=Array.from(e,function(e,t){var n,r={},a=0,o=[];for(let t of e.columns)switch(e.types[t[0]]){case"x":n=t.slice(1);break;case"line":let i=t.slice(1);i.maxFunc=generateMaxTree(i),i.max=i.maxFunc(0,i.length-1),i.max>a&&(a=i.max),o.push(t[0]),r[t[0]]=i}var i={};for(let t in e.colors)i[t]=extendColor(e.colors[t]);return{title:headings[t]||"Chart #"+t,length:e.columns[0].length-1,colors:i,names:e.names,types:e.types,x:n,y:r,columns:o,max:a}}),start()}function extendColor(e){let t=[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)];return{raw:t,rgba:function(e){return"rgba("+t.join(",")+","+e+")"},floata:function(e){return[t[0]/255,t[1]/255,t[2]/255,e]}}}