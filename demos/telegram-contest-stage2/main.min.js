$isMobile=/Android|webOS|iPhone|iPad|iPod|pocket|psp|kindle|avantgo|blazer|midori|Tablet|Palm|maemo|plucker|phone|BlackBerry|symbian|IEMobile|mobile|ZuneWP7|Windows Phone|Opera Mini/i.test(navigator.userAgent);$doc=document;$win=window;$body=document.body;$=$doc.querySelector.bind($doc);$html=$("html");$arr=$doc.querySelectorAll.bind($doc);
$new=function(a,e,c,f){function g(a){return a.substring(1)}var p=$doc.createElement(a.match(/^(\w+)/)[0]),m=a.match(/(\.[\w\d-]+)/g);a=a.match(/(#[\w\d-]+)/g);m&&(p.className=m.map(g).join(" "));a&&(p.id=a.map(g).join(" "));e&&(p["inner"+(f?"HTML":"Text")]=e);c&&p.append.apply(p,c);return p};Object.getOwnPropertyNames(Math).forEach(function(a){window[a]=Math[a]});function range(a,e,c){return max(min(a,c),e)}var mode=localStorage.getItem("mode")||"Day";
$("#switch-mode span").innerText="Day"==mode?"Night":"Day";var lastTimeModeChanged=0;($switcher=$("#switch-mode")).addEventListener("click",function(){$("#switch-mode span").innerText=mode;mode="Day"==mode?"Night":"Day";$body.className=mode;lastTimeModeChanged=Date.now();try{localStorage.setItem("mode",mode)}catch(a){}});function updateSwitchShadow(){$switcher.className=$html.scrollTop>$html.scrollHeight-$html.clientHeight-20?"no-shadow":""}$win.addEventListener("scroll",updateSwitchShadow);updateSwitchShadow();
var colors={background:[[250,250,250,1],[36,47,62,1]],gridLines:[[24,45,59,.1],[255,255,255,.1]],gridText:[[142,142,147,1],[163,177,194,.6]]};function color(a,e,c){var f=colors[a],g=range(Date.now()-lastTimeModeChanged,0,200)/200;"Day"==mode&&(g=1-g);g=easeinout(g);a=Array.from(f[0],function(a,c){return f[0][c]+(f[1][c]-f[0][c])*g});"number"===typeof e&&(a[3]*=e);return c?"#"+Array.from(a,function(a){a=(~~a).toString(16);return 1==a.length?"0"+a:a}).join(""):"rgba("+a.join(",")+")"}
function easeinout(a){return.5>a?2*a*a:-1+(4-2*a)*a}var chartOptions=[],lastTimeRender=Date.now();
function render(){requestAnimationFrame(render);var a=Date.now()-lastTimeRender,e=Date.now();200>lastTimeRender-lastTimeModeChanged&&($("meta[name=theme-color]").content=color("background"));for(var c=0;c<chartOptions.length;++c){var f=chartOptions[c];renderMain(f,a);renderLegend(f,a);f.lastHover=f.hover;f.first=!1;f.forceRender=!1;f.lastL=f.L;f.lastR=f.R;f.zoom.lastL=f.zoom.L;f.zoom.lastR=f.zoom.R;f.lastHover=f.hover;f.zoom.lastHover=f.zoom.hover}lastTimeRender=e}render();
$("meta[name=theme-color]").content=color("background");
function renderMain(a,e){var c=data[a.id],f=0==Object.keys(a.selected).filter(function(b){return a.selected[b]!=a.alpha[b]}).length;a.zoom.value&&a.zoom.selected&&(f=f&&0==Object.keys(a.zoom.selected).filter(function(b){return a.zoom.selected[b]!=a.zoom.alpha[b]}).length);var g=a.first||a.forceRender||!f||a.zoom.value!=a.zoom.t||!a[1]||a[1].minShouldBe!=a[1].lastMin||a[1].maxShouldBe!=a[1].lastMax||(a.zoom.chart?!a.zoom[1]||a.zoom[1].minShouldBe!=a.zoom[1].lastMin||a.zoom[1].maxShouldBe!=a.zoom[1].lastMax:
!1);if(g||!f||a.first||a.forceRender||a.zoom.value!=a.zoom.t||a.zoom.value&&(!(a.zoom.chart&&a.zoom.L==a.zoom.lastL&&a.zoom.R==a.zoom.lastR&&a.zoom[0]&&a.zoom[1]&&a.zoom[0].minShouldBe==a.zoom[0].lastMin&&a.zoom[0].maxShouldBe==a.zoom[0].lastMax&&a.zoom[1].minShouldBe==a.zoom[1].lastMin&&a.zoom[1].maxShouldBe==a.zoom[1].lastMax)||"line"!=a.zoom.chart.types.y0&&a.zoom.hover!=a.zoom.lastHover)||a.lastL!=a.L||a.lastR!=a.R||!a[1]||!a[0]||a[0].minShouldBe!=a[0].lastMin||a[0].maxShouldBe!=a[0].lastMax||
a[1].minShouldBe!=a[1].lastMin||a[1].maxShouldBe!=a[1].lastMax||"line"!=c.types.y0&&a.hover!=a.lastHover){var p=a.gl,m=a.ctx;f=range(e/75,.01,1);for(var k=c.length,l=range(a.L*k,0,k),r=range(a.R*k,0,k),t=range(floor(l),0,k),v=range(ceil(r),0,k),b=(a.R-a.L)*k,q=0;q<c.axes.length;++q){var u=c.axes[q],y=a.alpha[u],w=a.selected[u];y!=w&&(a.alpha[u]=y+=(w-y)*f,w&&.99<y||!w&&.01>y)&&(a.alpha[u]=w)}if(a.zoom.value&&a.zoom.chart&&a.zoom.selected&&c.types.y0!=a.zoom.chart.types.y0){var B=Object.keys(a.zoom.selected);
for(q=0;q<B.length;++q)if(u=B[q],y=a.zoom.alpha[u],w=a.zoom.selected[u],y!=w&&(a.zoom.alpha[u]=y+=(w-y)*f,w&&.99<y||!w&&.01>y))a.zoom.alpha[u]=w}procentSubchart=processMinMax(a,a,t,v,0,f,c);if(a.zoom.value!=a.zoom.t){a.zoom.t=range((Date.now()-a.zoom.tStart)/a.zoom.duration,0,1);a.zoom.value||(a.zoom.t=1-a.zoom.t);var D=a.zoom.L,h=a.zoom.R;a.zoom.chart.percentage&&(D=PRa(a.zoom,1),h=PRa(a.zoom,0));a.zoom.chart&&c.types.y0!=a.zoom.chart.types.y0||a.updateSlider(a.L+(D-a.L)*a.zoom.t,a.R+(h-a.R)*a.zoom.t)}if(a.zoom.t&&
a.zoom.chart){var A=floor(a.zoom.L*a.zoom.chart.length);t=ceil(a.zoom.R*a.zoom.chart.length);A=processMinMax(a.zoom,a.zoom.value&&a.zoom.chart&&a.zoom.chart.types.y0!=c.types.y0?a.zoom:a,A,t,0,f,a.zoom.chart);a.zoom.lastHover=a.zoom.hover}a.type?(g||(p.enable(p.SCISSOR_TEST),p.scissor(0,a.H-a.cH,a.W,a.cH+1)),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),g||p.disable(p.SCISSOR_TEST)):(g?m.clearRect(0,0,a.W,a.H):m.clearRect(0,0,a.W,a.cH),m.lineCap="round");maskIn(a,!0);c.stacked&&c.percentage?renderStacked(a,
c,l,r,b,!0):(a.zoom.chart&&(D=a.zoom.L*a.zoom.chart.length,h=a.zoom.R*a.zoom.chart.length),"bar"==c.types.y0?(0<a.zoom.t&&a.zoom.chart&&"bar"==a.zoom.chart.types.y0?renderBarChart(a,a.zoom.chart,D,h,!0,A,!0):0<a.zoom.t&&a.zoom.chart&&a.zoom.chart.types.y0!=c.types.y0&&renderChart(a,a.zoom,a.zoom.chart,0,a.zoom.chart.length-1,!0,A,null),1>a.zoom.t&&renderBarChart(a,c,l,r,!0,procentSubchart)):1>a.zoom.t?renderChart(a,a,c,l,r,!0,procentSubchart,A):renderChart(a,a,a.zoom.chart,D,h,!0,A,null));maskOut(a);
if(g){g=processMinMax(a,a,0,c.length,1,f,c);var F;0<a.zoom.t&&a.zoom.chart&&(F=processMinMax(a.zoom,a,0,a.zoom.chart.length,1,f,a.zoom.chart));maskIn(a,!1);c.stacked&&c.percentage?renderStacked(a,c,0,k,k-1,!1):"bar"==c.types.y0?(1>a.zoom.t&&renderBarChart(a,c,0,c.length-1,!1,g,!1,a.zoom.chart&&c.types.y0!=a.zoom.chart.types.y0),a.zoom.chart&&0<a.zoom.t&&c.types.y0==a.zoom.chart.types.y0&&renderBarChart(a,a.zoom.chart,0,a.zoom.chart.length-1,!1,A,!0)):renderChart(a,a,c,0,c.length-1,!1,g,F);maskOut(a)}}}
function makeSumTree(a,e){var c=Array(a.length).fill(0);c.selected=Array(a.axes.length);for(var f=0;f<a.axes.length;++f)c.selected[f]=e.alpha[a.axes[f]];for(var g=0;g<a.length;++g)for(f=0;f<a.axes.length;++f)c[g]+=a.data[a.axes[f]][g]*e.alpha[a.axes[f]];c.getMax=generateSegmentTree(c,Math.max,-Infinity);return c}
function processMinMax(a,e,c,f,g,p,m){var k=null,l=null;if(m.stacked){if(!a.sumTree||0<a.sumTree.selected.filter(function(a,c){return e.alpha[m.axes[c]]!=a}).length)a.sumTree=makeSumTree(m,e);l=0;k=m.percentage?1:a.sumTree.getMax(c,f)}else for(var r,t,v=0;v<m.axes.length;++v)if(1==e.selected[m.axes[v]]){g?(t=m.data[m.axes[v]].max,r=m.data[m.axes[v]].min):(t=m.data[m.axes[v]].getMax(c,f),r=m.data[m.axes[v]].getMin(c,f));m.y_scaled&&1==v&&(t*=m.S,r*=m.S);if(null==k||t>k)k=t;if(null==l||r<l)l=r}null==
k&&(k=0);null==l&&(l=0);"bar"==m.types.y0&&(l/=2);a[g]||(a[g]={});a[g].maxShouldBe=k;a[g].lastMax||(a[g].lastMax=k);k=a[g].lastMax+(k-a[g].lastMax)*p;x=max(k,a[g].maxShouldBe);n=min(k,a[g].maxShouldBe);0!=x&&.999<n/x&&(k=a[g].maxShouldBe);a[g].lastMax=k;a[g].minShouldBe=l;a[g].lastMin||(a[g].lastMin=l);l=a[g].lastMin+(l-a[g].lastMin)*p;x=max(l,a[g].minShouldBe);n=min(l,a[g].minShouldBe);0!=x&&.999<n/x&&(l=a[g].minShouldBe);a[g].lastMin=l;return function(a,c){m.y_scaled&&1==c&&(a*=m.S);return(a-l)/
(k-l)}}
function maskIn(a,e){var c;if(a.type){(c=a.gl).clearStencil(0);c.clear(c.STENCIL_BUFFER_BIT);c.enable(c.STENCIL_TEST);c.colorMask(!1,!1,!1,!1);c.stencilOp(c.KEEP,c.KEEP,c.REPLACE);c.stencilFunc(c.ALWAYS,1,255);var f=e?1-a.cH/a.H:a.sH/a.H;glF(c,c.TRIANGLES,[0,f,0,!!e,1,f,0,!!e,1,f,1,!!e]);c.stencilFunc(c.EQUAL,1,255);c.colorMask(!0,!0,!0,!0);c.stencilOp(c.KEEP,c.KEEP,c.KEEP)}else(c=a.ctx).save(),c.beginPath(),c.moveTo(0,e?0:a.H-a.sH),c.lineTo(a.W,e?0:a.H-a.sH),c.lineTo(a.W,e?a.cH:a.H),c.lineTo(0,e?
a.cH:a.H),c.lineTo(0,e?0:a.H-a.sH),c.clip()}function maskOut(a){a.type?a.gl.disable(a.gl.STENCIL_TEST):a.ctx.restore()}
function renderBarChart(a,e,c,f,g,p,m,k){p=1/(f-c);var l=e.axes,r=floor(c),t=ceil(f),v=Array(t-r);v.fill(0);var b=(g?a.cH:a.sH)/a.H,q=k?1-a.zoom.t:1,u=k?1-a.zoom.t:1,y=(1-q)/2,w=(1-u)/2,B=0,D=0;f=f-c-1;m||k||(B=-(a.zoom.F-c)/f,D=1-(a.zoom.T-c)/f);k=a;m&&(k=a.zoom);for(f=0;f<l.length;++f){var h=l[f],A=e.data[h];a.type||(a.ctx.fillStyle=e.colors[h].rgb);var F=[];for(var I=k[!g-0],C=r;C<t;++C){var J=(A[C]*a.alpha[h]-I.lastMin)/(I.lastMax-I.lastMin),G=v[C-r]/I.lastMax,E=(C-c)*p,H=E+p;0<a.zoom.t&&(C<a.zoom.from?
(E+=B*a.zoom.t,H+=B*a.zoom.t):C>a.zoom.from?(E+=D*a.zoom.t,H+=D*a.zoom.t):C==a.zoom.from&&(E+=B*a.zoom.t,H+=D*a.zoom.t));E=E*q+y;H=H*q+y;G=G*u*b+w*b+(g?(a.H-a.cH)/a.H:0);J=G+J*(u-w/2)*b;a.type?(E=[E,G,E,J,H,G,E,J,H,J,H,G],g&&0<=k.hover&&C==k.hover&&glF(a.gl,a.gl.TRIANGLES,E,e.colors[h].floata(m?a.zoom.t:1-a.zoom.t)),F.push.apply(F,E)):(g&&0<=k.hover&&C!=k.hover?a.ctx.fillStyle=e.colors[h].rgba((g&&0<=k.hover?.5:1)*(m?a.zoom.t:1-a.zoom.t)):g&&k.hover==C&&(a.ctx.fillStyle=e.colors[h].rgba(m?a.zoom.t:
1-a.zoom.t)),a.ctx.fillRect(E*a.W,(1-J)*a.H,(H-E)*a.W,(J-G)*a.H));v[C-r]+=A[C]*a.alpha[h]}a.type&&glF(a.gl,a.gl.TRIANGLES,F,e.colors[h].floata((g&&0<=k.hover?.5:1)*(m?a.zoom.t:1-a.zoom.t)))}}
function renderChart(a,e,c,f,g,p,m,k,l){var r=.8/a.W*window.devicePixelRatio,t=.8/a.H*window.devicePixelRatio;l=floor(f);var v=ceil(g),b=c.axes,q=a.ctx,u=a.gl;g=g-f-1;var y=1;a.zoom.value&&a.zoom.chart&&p&&a.zoom.chart.types.y0!=data[a.id].types.y0&&(y=a.zoom.t);for(var w=0;w<b.length;++w){var B=function(a,b,h,c,f){return c+(a-b)/(h-b)*(f-c)},D=function(b,h){var c=a.cH/a.H*(1-h);if(a.type&&!p)C.push(b,a.sH/a.H*h);else if(a.type){c=1-c;if(null!=F){var f=atan2(I-c,F-b),e=f+PI/2,g=f-PI/2;f=cos(e)*r;
e=sin(e)*t;var A=cos(g)*r;g=sin(g)*t;C.push(b+f,c+e,F+f,I+e,b+A,c+g,F+A,I+g,F+f,I+e,b+A,c+g)}F=b;I=c}else q.lineTo(b*a.W,p?(1-h)*a.cH:(1-h)*a.sH+a.H-a.sH)},h=b[w];if(0!=e.alpha[h]){var A=c.data[h],F=null,I;if(a.type)var C=[];else q.strokeStyle=c.colors[h].rgba(e.alpha[h]*y),q.lineWidth=p?1.5*window.devicePixelRatio:1,q.beginPath();D(0,m(function(a,b){return a[floor(b)]+(a[ceil(b)]-a[floor(b)])*(b-floor(b))}(A,f),w));var J=a.zoom.T-a.zoom.F,G=0,E=0;if(p){G=(a.zoom.F-f)/g;E=(a.zoom.T-f)/g;var H=a.zoom.L,
L=a.zoom.R;G=(-G*H+G*L+H)/(H-L);E=(H*-E+H+L*E-1)/(H-L)}else G=-(a.zoom.F-f)/g,E=1-(a.zoom.T-f)/g;for(var K=l;K<=v;++K){if(k&&0<=a.zoom.t&&a.zoom.chart&&K>=a.zoom.F&&K<=a.zoom.T){H=(a.zoom.F-f)/g+G*a.zoom.t;L=(a.zoom.T-f)/g+E*a.zoom.t;for(K=(K-a.zoom.F)/J*a.zoom.chart.length;K<a.zoom.chart.length;++K){var N=K/(a.zoom.chart.length-1),M=a.zoom.F+J*N,P=floor(M),O=ceil(M);O==P&&O++;N=H+(L-H)*N;M=B(M,P,O,m(A[P],w),m(A[O],w));D(N,M+(k(a.zoom.chart.data[h][K],w)-M)*a.zoom.t)}K=a.zoom.T}if(K>v)break;D((K-
f)/g+(a.zoom.chart&&k?(K<a.zoom.from?G:E)*a.zoom.t:0),m(A[K],w))}a.type?glF(u,p?u.TRIANGLES:u.LINE_STRIP,C,c.colors[h].floata(e.alpha[h]*y)):q.stroke()}}}
function renderStacked(a,e,c,f,g,p){var m=a.ctx,k=a.gl,l=floor(c),r=ceil(f),t=Array(r-l+2).fill(0),v=-1;g=f-c;var b=a.L;var q=a.R;a.zoom.value&&a.zoom.chart.percentage&&(b=(a.zoom.L-.5-a.zoom.F)/(a.zoom.T-a.zoom.F),q=(a.zoom.R+.5-a.zoom.F)/(a.zoom.T-a.zoom.F));if(p){f=(a.zoom.F-c)/g;var u=(a.zoom.T-c)/g;f=(-f*b+f*q+b)/(b-q);q=(b*-u+b+q*u-1)/(b-q)}else f=-(a.zoom.F-c)/g,q=1-(a.zoom.T-c)/g;for(u=0;u<e.axes.length;++u){var y=e.axes[u];if(0!=a.alpha[y]&&0!=(p?1-a.zoom.t:1))if(a.type){var w=(p?a.cH:a.sH)/
a.H,B=p?1-w:0;b=[];for(var D=Array(r-l+2).fill(0),h=max(l-1,0);h<r+1;++h)if(!(0>h||h>e.length)&&(D[h-l+1]=t[h-l+1]+e.data[y][h]*a.alpha[y],0<h-l+1)){var A=(h-c)/g+(h-1<a.zoom.F?f:h-1>a.zoom.T?q:0)*a.zoom.t,F=(h+1-c)/g+(h<a.zoom.F?f:h>a.zoom.T?q:0)*a.zoom.t;h-1>=a.zoom.F&&h-1<=a.zoom.T&&(A+=((h-1-a.zoom.F)/(a.zoom.T-a.zoom.F+1)-A)*a.zoom.t);h>=a.zoom.F&&h<=a.zoom.T&&(F+=((h-a.zoom.F)/(a.zoom.T-a.zoom.F+1)-F)*a.zoom.t);var I=t[h-l]/a.sumTree[h-1],C=t[h-l+1]/a.sumTree[h],J=D[h-l]/a.sumTree[h-1],G=D[h-
l+1]/a.sumTree[h];0==h&&(A=0,I=C,J=G);b.push(A,I*w+B,A,J*w+B,F,(C+(I-C)*a.zoom.t)*w+B,A,J*w+B,F,(C+(I-C)*a.zoom.t)*w+B,F,(G+(J-G)*a.zoom.t)*w+B)}t=D;glF(k,k.TRIANGLES,b,e.colors[y].floata(p?1-a.zoom.t:1))}else{m.beginPath();for(h=r+1;h>=max(l-1,0);--h)h>=e.length||m.lineTo((h-c)/g*a.W,(1-t[h-(l-1)]/a.sumTree[h])*(p?a.cH:a.sH)+(p?0:a.H-a.sH)+2);for(h=max(l-1,0);h<r+1&&!(h>=e.length);++h)t[h-(l-1)]+=e.data[y][h]*a.alpha[y],isLast&&t[h-(l-1)]>v&&(v=t[h-(l-1)]),m.lineTo((h-c)/g*a.W,(1-t[h-(l-1)]/a.sumTree[h])*
(p?a.cH:a.sH)+(p?0:a.H-a.sH));m.fillStyle=e.colors[y].rgba(p?1-a.zoom.t:1);m.fill()}}}function d(a,e){for(e=void 0===e?1:e;.1*a>(e*=10););return e}
function renderLegend(a,e){var c=data[a.id];!a.first&&!a.forceRender&&200<lastTimeRender-lastTimeModeChanged&&a.zoom.t==a.zoom.value&&a.zoom.lastT==a.zoom.t&&(a.zoom.value||a[0].minShouldBe==a[0].lastMin&&a[0].maxShouldBe==a[0].lastMax&&a[1].minShouldBe==a[1].lastMin&&a[1].maxShouldBe==a[1].lastMax&&a.iX&&0==a.iX.length)&&(c.percentage&&a.zoom.value?a.zoom.L==a.zoom.lastL&&a.zoom.R==a.zoom.lastR&&0==Object.keys(a.selected).filter(function(c){return a.selected[c]!=a.alpha[c]}).length:1)&&(a.zoom.value?
a.zoom[0].minShouldBe==a.zoom[0].lastMin&&a.zoom[0].maxShouldBe==a.zoom[0].lastMax&&a.zoom[1].minShouldBe==a.zoom[1].lastMin&&a.zoom[1].maxShouldBe==a.zoom[1].lastMax&&a.zoom.iX&&0==a.zoom.iX.length&&a.iX&&0==a.iX.length&&a.zoom.lastHover==a.zoom.hover&&a.zoom.L==a.zoom.lastL&&a.zoom.R==a.zoom.lastR:1)&&0==Object.keys(a.selected).filter(function(c){return a.selected[c]!=a.alpha[c]}).length&&(a.zoom.value||a.L==a.lastL&&a.R==a.lastR&&a.lastHover==a.hover)||(a.zoom.lastT=a.zoom.t,a.legendCtx.clearRect(0,
0,a.W,a.H),c.percentage&&0<a.zoom.t?radialChart(a,e):(0<=a.hover&&hoverCircles(a,c,1-a.zoom.t,a),0<=a.zoom.hover&&hoverCircles(a,a.zoom.chart,a.zoom.t,a.zoom)),0<1-a.zoom.t&&yAxis(a,a,1-a.zoom.t),0<a.zoom.t&&yAxis(a,a.zoom,a.zoom.t),1>a.zoom.t&&xAxis(a,a,1-a.zoom.t,e,!1),!c.percentage&&0<a.zoom.t&&xAxis(a,a.zoom,a.zoom.t,e,!0))}function d(a){var e=1;if(0>=a)return 1;for(;.1*a>(e*=10););return e}
function xAxis(a,e,c,f,g){function p(b){if(!(0<=u.indexOf(b))){u.push(b);var c=new Date(k.data.x[b]);c=g?z(c.getUTCHours())+":"+z(c.getUTCMinutes()):shortMonths[c.getUTCMonth()]+" "+c.getUTCDate();k.percentage&&(b+=.5);"bar"==k.types.y0&&(b+=.5);b=(b/(l+("bar"==k.types.y0?1:0))-e.L)/(e.R-e.L)*a.W;var f=m.measureText(c);b>a.W||m.fillText(c,b-f.width/2,a.cH+t)}}var m=a.legendCtx,k=e.chart||data[a.id],l=k.length-1,r=e.R*l;floor(e.L*l);ceil(r);var t=10*window.devicePixelRatio;m.font=t+"px Arial";r=1/
(round(10*(e.R-e.L))/10);r=round(Math.pow(2,log2(parseFloat(r.toFixed(2)))));r=round(k.length/(6*r));var v=floor(e.L*(k.length-1));v-=v%r;e.iX||(e.iX=[]);if("number"===typeof e.lastDateStart&&e.lastDateDiff&&e.lastDateDiff!=r){for(var b=0;10>b;++b){var q=e.lastDateStart+e.lastDateDiff*b;0!=(q-v)%r&&q<k.length-1&&0<q&&e.iX.push({i:q,val:1,v:-1,dif:r})}for(b=0;10>b;++b)q=v+r*b,0!=(q-e.lastDateStart)%e.lastDateDiff&&q<k.length-1&&0<q&&e.iX.push({i:q,val:0,v:1,dif:r})}e.lastDateStart=v;e.lastDateDiff=
r;var u=[];for(b=0;b<e.iX.length;++b)q=e.iX[b],0!=q.i%r&&0<q.v&&(q.v*=-1),0==q.i%r&&0>q.v&&(q.v*=-1),q.val+=q.v*(abs(r-q.dif)+1)*f*.0025,0>q.val||1<q.val?(e.iX.splice(b,1),b--):(m.fillStyle=color("gridText",q.val*c),p(q.i));m.fillStyle=color("gridText",c);for(b=0;10>b;++b)q=v+r*b,0==q||q>=k.length-1||p(q,1)}function error(a){function e(){var f=(Date.now()-c)/500;1>f?requestAnimationFrame(e):f=1;f=sin((f+.2)*PI)*sin((f+.2)*PI*5)*.5;a.style.transform="translateX("+10*f+"px)"}var c=Date.now();e()}
function hoverCircles(a,e,c,f){var g=a.legendCtx,p=e.length,m=e.axes,k=f.L*p;p=(f.hover+(e.percentage?.5:0)-k)/(f.R*p-k-1)*a.W;"bar"!=e.types.y0&&(g.strokeStyle=color("gridLines",c),g.lineWidth=1,g.beginPath(),g.moveTo(p,0),g.lineTo(p,a.cH),g.stroke());k=a.zoom.chart&&a.zoom.value&&a.zoom.chart.types.y0!=data[a.id].types.y0&&a.zoom.selected?a.zoom:a;if(!e.percentage&&!e.stacked&&"bar"!=e.types.y0){g.lineWidth=2*window.devicePixelRatio;for(var l=0;l<m.length;++l)if(0!=k.alpha[m[l]]){var r=1-(e.data[m[l]][f.hover]*
(e.y_scaled&&1==l?e.S:1)-f[0].lastMin)/(f[0].lastMax-f[0].lastMin);g.beginPath();g.arc(p,r*a.cH,4*window.devicePixelRatio,0,2*PI);g.strokeStyle=e.colors[m[l]].rgba(k.alpha[m[l]]*c);g.fillStyle=color("background",k.alpha[m[l]]*c);g.fill();g.stroke()}}}
function radialChart(a,e){var c=a.zoom.chart,f=.9*min(a.cH/2,a.W/2),g=a.zoom.L,p=a.zoom.R,m=0,k=Array(c.axes.length),l=0,r=Array(c.axes.length);k.fill(0);r.fill(0);for(var t=0;t<c.axes.length;++t)for(var v=g;v<=p;++v)k[t]+=c.data[c.axes[t]][v]*a.alpha[c.axes[t]],m+=c.data[c.axes[t]][v]*a.alpha[c.axes[t]],r[t]+=c.data[c.axes[t]][v]*a.selected[c.axes[t]],l+=c.data[c.axes[t]][v]*a.selected[c.axes[t]];g=a.legendCtx;for(t=v=p=0;t<c.axes.length;++t){var b=k[t]/m,q=b*PI*2,u=r[t]/l;g.beginPath();g.moveTo(a.W/
2,a.cH/2);g.arc(a.W/2,a.cH/2,f,p,p+q);g.lineTo(a.W/2,a.cH/2);g.fillStyle=c.colors[c.axes[t]].rgba(a.zoom.t);g.fill();var y=.08*f+.15*f*b;g.font="bold "+y+"px Arial";var w=round(1E3*b)/10;t==c.axes.length-1&&(w=100-v);b=w.toFixed(1)+"%";v+=w;w=g.measureText(b);g.fillStyle="rgba(255,255,255,"+a.alpha[c.axes[t]]*a.zoom.t+")";1==u?g.fillText(b,a.W/2-w.width/2,a.cH/2+y/2):g.fillText(b,a.W/2+cos(p+q/2)*f*.6-w.width/2,a.cH/2+sin(p+q/2)*f*.6+y/2);p+=q}}
function yAxis(a,e,c){var f=e.chart?e.chart:data[a.id],g=a.legendCtx,p=(e[0].maxShouldBe-e[1].minShouldBe)/5;p=round(p/d(p))*d(p);f.percentage&&a.zoom.t==1-c&&(p=.25);if(!isNaN(p)&&(1<p||f.percentage&&a.zoom.t==1-c)){g.strokeStyle=color("gridLines",c);g.lineWidth=1;g.beginPath();for(var m=e[0].lastMin;m-e[0].lastMin+e[0].minShouldBe<=e[0].lastMax;m+=p){var k=m-e[0].lastMin+e[0].minShouldBe,l=(k-e[0].lastMin)/(e[0].lastMax-e[0].lastMin);g.moveTo(0,(1-l)*a.cH);g.lineTo(a.W,(1-l)*a.cH)}g.stroke();var r=
10*window.devicePixelRatio;g.font="bold "+r+"px Arial";g.fillStyle=color("gridText",c);g.lineWidth=5;g.lineCap="round";g.strokeStyle=color("background",c);for(m=e[0].lastMin;m-e[0].lastMin+e[0].minShouldBe<=e[0].lastMax;m+=p)if(k=m-e[0].lastMin+e[0].minShouldBe,l=(k-e[0].lastMin)/(e[0].lastMax-e[0].lastMin),!(-.1>l||1.1<l)){f.y_scaled&&(g.fillStyle=f.colors.y0.rgba(a.alpha.y0*c),g.strokeStyle=color("background",a.alpha.y0*c));if(f.y_scaled&&0<a.alpha.y0||!f.y_scaled){var t=f.percentage?(100*k).toFixed(0)+
"%":format(k);g.strokeText(t,r/2,(1-l)*a.cH-r/2);g.fillText(t,r/2,(1-l)*a.cH-r/2)}f.y_scaled&&a.alpha.y1&&(g.fillStyle=f.colors.y1.rgba(a.alpha.y1*c),g.strokeStyle=color("background",a.alpha.y1*c),t=g.measureText(format(k/f.S)),g.strokeText(format(k/f.S),a.W-r/2-t.width,(1-l)*a.cH-r/2),g.fillText(format(k/f.S),a.W-r/2-t.width,(1-l)*a.cH-r/2))}}}function format(a){return 1E6<=a?round(a/1E5)/10+"M":1E3<=a?round(a/100)/10+"K":round(a)+""}var chartsContainer=$("#main");
function initChart(a){function e(){var a=b.W,c=b.H,e=b.sH,f=b.cH;b.W=b.content.clientWidth*window.devicePixelRatio;b.H=b.content.clientHeight*window.devicePixelRatio;b.sH=48*window.devicePixelRatio;b.cH=b.H-80*window.devicePixelRatio;b.sliderRect=b.slider.getBoundingClientRect();b.canvasRect=b.canvas.getBoundingClientRect();if(a!=b.W||c!=b.H||e!=b.sH||f!=b.cH)b.canvasLegend.width=b.canvas.width=b.W,b.canvasLegend.height=b.canvas.height=b.H,b.forceRender=!0;b.type&&b.gl.viewport(0,0,b.W,b.H);b.updateSlider();
b.updateDate()}function c(a){var c;if(c=$isMobile&&!b.zoom.value&&!b.zoom.loading)a:{for(c=a.target;null!=c;){if("hover"==c.className){c=!0;break a}c=c.parentElement}c=!1}if(c)a.preventDefault(),m();else{if(a instanceof MouseEvent){var h=a.clientX;var e=a.clientY}else h=a.changedTouches[0].clientX,e=a.changedTouches[0].clientY;a=b.zoom.chart&&b.zoom.value?b.zoom.chart:data[b.id];c=b.zoom.value?b.zoom:b;if(!(a.percentage&&a.stacked&&b.zoom.value)){var g=b.canvas.getBoundingClientRect();h=range((h-
g.left)/g.width,0,1);(e-g.top)/g.height>b.cH/b.H?(b.content.style.cursor="default",p()):(b.content.style.cursor=b.zoom.value?"default":"pointer",e="bar"==a.types.y0,c.hover=e?round((c.L+(c.R-c.L)*h)*a.length-.5):round((c.L+(c.R-c.L)*h)*(a.length-1)+(e?-.5:0)),f(h))}}}function f(a){var c=b.zoom.value?b.zoom.chart:data[b.id],h=b.zoom.value&&!c.percentage?b.zoom:b;if(!c.percentage||!b.zoom.value){null==u&&g();for(var e=0,f=c.axes.length-1;0<=f;--f){var k=u.querySelector("div."+c.axes[f]);null==k&&(g(),
k=u.querySelector("div."+c.axes[f]));var l=u.querySelector("div.l"+c.axes[f]),p=u.querySelector("div.p"+c.axes[f]),m=(b.zoom.value&&b.zoom.chart&&b.zoom.selected&&b.zoom.chart.types.y0!=data[b.id].types.y0?b.zoom:b).selected[c.axes[f]]?"block":"none";l.style.display=k.style.display=m;p&&(p.style.display=m);l=c.data[c.axes[f]][h.hover];c.stacked&&b.selected[c.axes[f]]&&(e+=l);p&&c.percentage&&!b.zoom.value&&(p.innerText=(l/h.sumTree[h.hover]*100).toFixed(1)+"%");k.innerText=formatValue(l)}c.stacked&&
!c.percentage&&(u.querySelector("div.all").innerText=formatValue(e));a*=b.canvasRect.width;u.style.left=range(a+(a<u.clientWidth?15:-(u.clientWidth+15)),-15,b.canvasRect.width-u.clientWidth+15)+"px";a=new Date(c.data.x[h.hover]);y.innerText=(b.zoom.value?z(a.getUTCHours())+":"+z(a.getUTCMinutes())+" ":"")+strDate2(c.data.x[h.hover])}}function g(){u&&u.remove();var a=b.zoom.value?b.zoom:b,c=b.zoom.value?b.zoom.chart:data[b.id];u=$new("div.hover");var e=y=$new("h3",strDate2(c.data.x[a.hover]));a=$new("span.percents");
var f=$new("span.labels"),g=$new("span.values");u.append(e);for(e=0;e<c.axes.length;++e){var k=$new("div.l"+c.axes[e]),l=$new("div."+c.axes[e]);l.style.color=c.colors[c.axes[e]].rgb;k.innerText=c.names[c.axes[e]];c.percentage&&a.append($new("div.p"+c.axes[e]));f.append(k);g.append(l)}c.stacked&&!c.percentage&&(k=$new("div.lall","All"),l=$new("div.all"),k.style.fontWeight="bold",c.percentage&&a.append($new("div.pall")),f.append(k),g.append(l));c.percentage&&u.append(a);u.append(f,g);u.addEventListener("click",
m);b.content.append(u)}function p(a){b.hover=-1;b.zoom.hover=-1;u&&(u.remove(),u=null)}function m(){if(!(b.zoom.value||0>b.hover)){var a=data[b.id];b.zoom.loading=!0;b.zoom.from=b.hover;p();b.container.className="chart zoomed";var c=a.data.x[b.zoom.from],e=k(c);a.percentage?(b.zoom.loading=!1,b.zoom.value=!0,b.zoom.tStart=Date.now()-(1-abs(b.zoom.value-b.zoom.t))*b.zoom.duration,b.zoom.chart=a,b.zoom.F=range(b.zoom.from-3,0,b.zoom.chart.length-1),b.zoom.T=range(b.zoom.from+3,0,b.zoom.chart.length-
1),b.zoom.L=b.zoom.from,b.zoom.R=b.zoom.from,b.updateDate()):loadZoomed(b.id,c,function(c){b.zoom.chart=c;b.zoom.chart.stacked&&(b.zoom.sumTree=makeSumTree(b.zoom.chart,b));b.zoom.alpha={};b.zoom.selected={};for(var f=0;f<c.axes.length;++f)b.zoom.alpha[c.axes[f]]=1,b.zoom.selected[c.axes[f]]=1;var h=0,g=0;for(f=0;f<c.length;++f)if(k(c.data.x[f])==e){h=f;break}for(f=c.length-1;0<=f;--f)if(k(c.data.x[f])==e){g=f;break}b.zoom.F=b.zoom.T=-1;var l=k(c.data.x[0]),p=k(c.data.x[c.length-1]);for(f=0;f<a.length;++f){var m=
k(a.data.x[f]);m==l&&-1==b.zoom.F&&(b.zoom.F=f);m==p&&-1==b.zoom.T&&(b.zoom.T=f);if(-1!=b.zoom.F&&-1!=b.zoom.T)break}-1==b.zoom.F&&(b.zoom.F=0);-1==b.zoom.T&&(b.zoom.T=a.length-1);b.zoom.L=h/(c.length-1);b.zoom.R=g/(c.length-1);a.types.y0!=c.types.y0&&(b.slider.className="slider hide",b.zoom.L=0,b.zoom.R=1,b.updateCheckboxes(b.zoom,b.zoom.chart));b.zoom.loading=!1;b.zoom.value=!0;b.updateDate();b.zoom.tStart=Date.now()-(1-abs(b.zoom.value-b.zoom.t))*b.zoom.duration})}}function k(a){a=new Date(a);
return(new Date(a.getFullYear(),a.getMonth(),a.getDate())).getTime()}function l(a){if(a instanceof MouseEvent){w=!0;var c=a.clientX;var f="mouse";a=10/b.sliderRect.width}else{if(a.changedTouches){a.preventDefault();for(f=0;f<a.changedTouches.length;++f)l(a.changedTouches[f]);return}f=a.identifier;c=a.clientX;a=max(a.radiusX,10)/b.sliderRect.width}c=(c-b.sliderRect.left)/b.sliderRect.width;var e=b.zoom.value?b.zoom:b,g=PR(b.zoom)?PRa(b.zoom,1):e.L;e=PR(b.zoom)?PRa(b.zoom,0):e.R;c>=g-2*a&&c<=g-.5*a?
B[f]="L":c>=e-a&&c<=e+a?B[f]="R":c>=g&&c<=e?(B[f]="all",D=c-g):B[f]=null}function r(a){if(a instanceof MouseEvent){if(!w)return;var c=a.clientX;var e="mouse";a=10/b.sliderRect.width}else{if(a.changedTouches){a.preventDefault();for(e=0;e<a.changedTouches.length;++e)r(a.changedTouches[e]);return}e=a.identifier;c=a.clientX;a=max(a.radiusX,10)/b.sliderRect.width}c=(c-b.sliderRect.left)/b.sliderRect.width;var g=b.zoom.value?b.zoom:b,h=PR(b.zoom)?PRa(b.zoom,1):g.L,k=PR(b.zoom)?PRa(b.zoom,0):g.R,l=PR(b.zoom)?
1/(b.zoom.T-b.zoom.F+1):.1,m=null,q=null;if("L"==B[e])m=range(c+1.5*a,0,k-l);else if("R"==B[e])q=range(c,h+l,1);else if("all"==B[e])e=k-h,m=range(c-D,0,1-e),q=m+e;else return;null!=m&&(PR(b.zoom)?g.L=range(round(b.zoom.F-.5+m*(b.zoom.T-b.zoom.F+1)+.5),b.zoom.F,g.R+1):g.L=m);null!=q&&(PR(b.zoom)?g.R=range(round(b.zoom.F-.5+q*(b.zoom.T-b.zoom.F+1)-.5),g.L,b.zoom.T):g.R=q);b.updateSlider();b.updateDate();0<=b.hover&&f();p()}for(var t={},v=0;v<a.axes.length;++v)t[a.axes[v]]=1;var b={id:a.id,selected:t,
alpha:Object.assign({},t),L:.5,R:1,forceRender:!1,first:!0,hover:-1,zoom:{value:0,t:0,tStart:0,from:0,chart:null,duration:200,loading:!1}};b.container=$new("div.chart");t=$new("div.header",null,[$new("h3.heading",["Followers","Channel","My grocery cart","Fruit videos ratings","Fruit Paradise"][b.id]),v=$new("h3.zoom-out","Zoom Out"),b.dateLabel=$new("h3.date"),b.dateLabelZoomed=$new("h3.date-zoomed")]);v.addEventListener("click",function(){p();b.zoom.value&&(b.container.className="chart",b.slider.className=
"slider",b.zoom.value=!1,b.zoom.tStart=Date.now()-(1-abs(b.zoom.value-b.zoom.t))*b.zoom.duration,a.types.y0!=b.zoom.chart.types.y0&&b.removeCheckboxes())});b.content=$new("div.content");b.content.append(b.canvas=$new("canvas"),b.canvasLegend=$new("canvas"),b.slider=$new("div.slider",null,[b.sliderLeft=$new("span.bg"),b.sliderBtn=$new("span.btn",null,[$new("span"),$new("span")]),b.sliderRight=$new("span.bg")]));b.sliderLeft.style.left=b.sliderRight.style.right="0";v={alpha:!0,stencil:!0,preserveDrawingBuffer:!0};
b.ctx=b.canvas.getContext("webgl",v)||b.canvas.getContext("experimental-webgl",v);b.ctx?b.gl=initGL(b.ctx):b.ctx=b.canvas.getContext("2d",v);b.type=!!b.gl;b.legendCtx=b.canvasLegend.getContext("2d",v);$win.addEventListener("resize",e);if(1<a.axes.length){var q=$new("div.checkboxes");a.axes.forEach(function(c){var e,g=$new("div.checkbox.checked",null,[$new("div.checker",null,[span1=$new("span"),span2=$new("span")]),e=$new("span.label",a.names[c])]),h=a.colors[c].rgb;g.style.backgroundColor=h;e.style.color=
h;g.style.borderColor=h;g.addEventListener("click",function(){var a=0>g.className.indexOf("not-checked");1==Object.keys(b.selected).filter(function(a){return b.selected[a]}).length&&a?error(g):(g.className="checkbox "+(a?"not-checked":"checked"),b.selected[c]=!a-0,0<=b.hover&&f())});q.append(g)})}b.updateCheckboxes=function(a,c){var e=$new("div.checkboxes");e.style.position="absolute";e.style.left=e.style.right=e.style.bottom="1em";e.style.opacity=0;e.style.width="initial";setTimeout(function(){e.style.opacity=
1},20);e.style.zIndex=9;var g=0;Object.keys(a.selected).forEach(function(h){var k,l=$new("div.checkbox"+(a.selected[h]?".checked":""),null,[$new("div.checker",null,[span1=$new("span"),span2=$new("span")]),k=$new("span.label",c.names[h])]),m=c.colors[h].rgb;l.style.backgroundColor=m;k.style.color=m;l.style.borderColor=m;l.addEventListener("click",function(){var c=0>l.className.indexOf("not-checked");1==Object.keys(a.selected).filter(function(b){return a.selected[b]}).length&&c?error(l):(l.className=
"checkbox "+(c?"not-checked":"checked"),a.selected[h]=!c-0,0<=b.hover&&f())});e.append(l);g++;g==Object.keys(a.selected).length&&setTimeout(function(){b.container.style.paddingBottom=max(0,e.clientHeight-48+15)+"px"},10)});b.container.append(e)};b.removeCheckboxes=function(){var a=b.container.querySelectorAll("div.checkboxes");null!=a&&a.forEach(function(a){a.style.opacity="0";setTimeout(function(){a.remove()},200)});b.container.style.paddingBottom="0px"};b.content.addEventListener("mouseenter",c);
b.content.addEventListener("mousemove",c);b.content.addEventListener("mouseleave",p);b.content.addEventListener("touchstart",c);b.content.addEventListener("touchmove",c);var u=null,y;$isMobile||b.content.addEventListener("click",m);var w=!1;b.slider.addEventListener("mousedown",l);b.slider.addEventListener("touchstart",l);b.slider.addEventListener("touchmove",r);b.slider.addEventListener("touchend",function(a){a instanceof MouseEvent&&(w=!1,B.mouse=null)});$body.addEventListener("mousemove",r);$body.addEventListener("mouseup",
function(a){w=!1});var B={},D=0;b.updateSlider=function(a,c){var e=b.zoom.value?b.zoom:b;"undefined"===typeof a&&"undefined"===typeof c&&data[b.id].percentage&&b.zoom.value?(a=PRa(b.zoom,1),c=PRa(b.zoom,0)):("undefined"===typeof a&&(a=e.L),"undefined"===typeof c&&(c=e.R));b.sliderLeft.style.width=100*a+"%";b.sliderRight.style.width=100*(1-c)+"%";b.sliderBtn.style.left=100*a+"%";b.sliderBtn.style.width=100*(c-a)+"%"};b.updateDate=function(){var a=data[b.id],c=a.data.x[floor(b.L*(a.length-1))],e=a.data.x[ceil(b.R*
(a.length-1))];b.dateLabel.innerText=strDate1(c)+" - "+strDate1(e);b.zoom.chart&&(b.zoom.chart.percentage?(e=b.zoom.chart.data.x[b.zoom.L],c=b.zoom.chart.data.x[b.zoom.R]):(e=b.zoom.chart.data.x[floor(b.zoom.L*(b.zoom.chart.length-1))],c=b.zoom.chart.data.x[ceil(b.zoom.R*(b.zoom.chart.length-1))]),e=strDate2(e),c=strDate2(c),b.dateLabelZoomed.innerText=e==c||b.zoom.chart&&a.types.y0!=b.zoom.chart.types.y0?e:e+" - "+c)};b.container.append(t,b.content);q&&b.container.append(q);chartsContainer.append(b.container);
e();chartOptions[a.id]=b}function PR(a){return a.value&&a.chart&&a.chart.percentage}function PRa(a,e){return range(((e?a.L:a.R)-.5*(e?1:-1)-(a.F-.5))/(a.T-a.F+1),0,1)}function cursor(a){$body.style.cursor=a}window.chartsLoaded=function(){for(var a=0;a<data.length;++a)initChart(data[a])};function dateID(a){a=new Date(a);return[a.getUTCDate(),a.getUTCMonth,a.getUTCFullYear()].join("-")}
var days="Sun Mon Tue Wed Thu Fri Sat".split(" "),fullMonths="January February March April May June July August September October November December".split(" "),shortMonths=fullMonths.map(function(a){return a.substring(0,3)});function strDate1(a){a=new Date(a);return[a.getUTCDate(),fullMonths[a.getUTCMonth()],a.getUTCFullYear()].join(" ")}function strDate2(a){a=new Date(a);return[days[a.getDay()]+",",a.getDate(),shortMonths[a.getMonth()],a.getFullYear()].join(" ")}
function formatValue(a){return(~~a+"").replace(/\B(?=(\d{3})+(?!\d))/g," ")}
function initGL(a){if(!a)return null;a.shaderSource(vertexShader=a.createShader(35633),"precision mediump float;\nattribute vec2 V;\nvoid main() {\n\tgl_Position = vec4(V, 0.0, 1.0) * 2.0 - 1.0;\n}\n");a.compileShader(vertexShader);a.shaderSource(fragmentShader=a.createShader(35632),"precision mediump float;\nuniform vec4 color;\nvoid main() {\n\tgl_FragColor = color;\n}\n");a.compileShader(fragmentShader);a.attachShader(program=a.createProgram(),vertexShader);a.attachShader(program,fragmentShader);
a.linkProgram(program);a.useProgram(program);a._cu=a.getUniformLocation(program,"color");a._vb=a.createBuffer();a.enableVertexAttribArray(a._va=a.getAttribLocation(program,"V"));a.enable(3042);a.blendEquation(32774);a.blendFuncSeparate(770,771,1,771);return a}
function glF(a,e,c,f,g){a.bindBuffer(a.ARRAY_BUFFER,a._vb);a.bufferData(a.ARRAY_BUFFER,c.BYTES_PER_ELEMENT?c:new Float32Array(c),a.STREAM_DRAW);a.vertexAttribPointer(a._va,2,a.FLOAT,!1,0,0);f&&a.uniform4fv(a._cu,f);a.drawArrays(e,0,c.length/2)};